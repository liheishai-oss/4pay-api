# 百易支付API测试报告

## 测试概览
- **测试时间**: 2025年10月18日 星期六 19时01分57秒 CST
- **测试地址**: https://api.baiyi-pay.com
- **测试工具**: Apache Bench (ab), wrk, curl
- **测试环境**: Linux/Unix

## 测试范围
1. 基础功能测试
   - 订单创建
   - 订单查询  
   - 商户余额查询

2. 并发性能测试
   - Apache Bench 并发测试
   - wrk 高性能测试

3. 压力测试
   - 高并发压力测试
   - 持续压力测试

4. 错误处理测试
   - 无效参数测试
   - 网络异常测试

## 测试结果

### 基础功能测试结果
#### 订单创建测试
```json

```

#### 订单查询测试
```json

```

#### 商户余额查询测试
```json

```

### 性能测试结果

#### 订单创建并发测试 (100请求, 10并发)
```
This is ApacheBench, Version 2.3 <$Revision: 1913912 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking api.baiyi-pay.com (be patient).....done


Server Software:        nginx/1.22.1
Server Hostname:        api.baiyi-pay.com
Server Port:            443
SSL/TLS Protocol:       TLSv1.2,ECDHE-ECDSA-CHACHA20-POLY1305,256,256
Server Temp Key:        ECDH X25519 253 bits
TLS Server Name:        api.baiyi-pay.com

Document Path:          /api/v1/order/create
Document Length:        94 bytes

Concurrency Level:      10
Time taken for tests:   4.220 seconds
Complete requests:      100
Failed requests:        99
   (Connect: 0, Receive: 0, Length: 99, Exceptions: 0)
Non-2xx responses:      5
Total transferred:      51752 bytes
Total body sent:        57700
HTML transferred:       6372 bytes
Requests per second:    23.70 [#/sec] (mean)
Time per request:       421.968 [ms] (mean)
Time per request:       42.197 [ms] (mean, across all concurrent requests)
Transfer rate:          11.98 [Kbytes/sec] received
                        13.35 kb/s sent
                        25.33 kb/s total

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:      129  270 139.9    236    1155
Processing:    46  104  76.5     85     572
Waiting:       46   91  63.6     77     572
Total:        176  374 172.5    330    1212

Percentage of the requests served within a certain time (ms)
  50%    330
  66%    383
  75%    426
  80%    455
  90%    561
  95%    715
  98%    994
  99%   1212
 100%   1212 (longest request)
```

#### 订单查询并发测试 (100请求, 10并发)
```
This is ApacheBench, Version 2.3 <$Revision: 1913912 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking api.baiyi-pay.com (be patient).....done


Server Software:        nginx/1.22.1
Server Hostname:        api.baiyi-pay.com
Server Port:            443
SSL/TLS Protocol:       TLSv1.2,ECDHE-ECDSA-CHACHA20-POLY1305,256,256
Server Temp Key:        ECDH X25519 253 bits
TLS Server Name:        api.baiyi-pay.com

Document Path:          /api/v1/order/query
Document Length:        82 bytes

Concurrency Level:      10
Time taken for tests:   5.557 seconds
Complete requests:      100
Failed requests:        99
   (Connect: 0, Receive: 0, Length: 99, Exceptions: 0)
Non-2xx responses:      6
Total transferred:      51484 bytes
Total body sent:        38300
HTML transferred:       6388 bytes
Requests per second:    18.00 [#/sec] (mean)
Time per request:       555.707 [ms] (mean)
Time per request:       55.571 [ms] (mean, across all concurrent requests)
Transfer rate:          9.05 [Kbytes/sec] received
                        6.73 kb/s sent
                        15.78 kb/s total

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:      120  296 186.0    252    1310
Processing:    46   99  62.0     88     429
Waiting:       46   87  41.2     83     403
Total:        166  395 199.2    364    1421

Percentage of the requests served within a certain time (ms)
  50%    364
  66%    426
  75%    457
  80%    470
  90%    584
  95%    739
  98%   1223
  99%   1421
 100%   1421 (longest request)
```

#### 商户余额查询并发测试 (100请求, 10并发)
```
This is ApacheBench, Version 2.3 <$Revision: 1913912 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking api.baiyi-pay.com (be patient).....done


Server Software:        nginx/1.22.1
Server Hostname:        api.baiyi-pay.com
Server Port:            443
SSL/TLS Protocol:       TLSv1.2,ECDHE-ECDSA-CHACHA20-POLY1305,256,256
Server Temp Key:        ECDH X25519 253 bits
TLS Server Name:        api.baiyi-pay.com

Document Path:          /api/v1/merchant/balance
Document Length:        82 bytes

Concurrency Level:      10
Time taken for tests:   4.539 seconds
Complete requests:      100
Failed requests:        99
   (Connect: 0, Receive: 0, Length: 99, Exceptions: 0)
Non-2xx responses:      2
Total transferred:      52508 bytes
Total body sent:        34300
HTML transferred:       6276 bytes
Requests per second:    22.03 [#/sec] (mean)
Time per request:       453.881 [ms] (mean)
Time per request:       45.388 [ms] (mean, across all concurrent requests)
Transfer rate:          11.30 [Kbytes/sec] received
                        7.38 kb/s sent
                        18.68 kb/s total

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:      124  304 252.3    234    1920
Processing:    46   96  80.0     76     738
Waiting:       46   82  39.0     70     281
Total:        173  399 278.5    321    2131

Percentage of the requests served within a certain time (ms)
  50%    321
  66%    378
  75%    438
  80%    472
  90%    682
  95%    935
  98%   1465
  99%   2131
 100%   2131 (longest request)
```

### 压力测试结果

#### 高并发压力测试 (500请求, 50并发)
```
This is ApacheBench, Version 2.3 <$Revision: 1913912 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking api.baiyi-pay.com (be patient)


Server Software:        nginx/1.22.1
Server Hostname:        api.baiyi-pay.com
Server Port:            443
SSL/TLS Protocol:       TLSv1.2,ECDHE-ECDSA-CHACHA20-POLY1305,256,256
Server Temp Key:        ECDH X25519 253 bits
TLS Server Name:        api.baiyi-pay.com

Document Path:          /api/v1/order/create
Document Length:        62 bytes

Concurrency Level:      50
Time taken for tests:   5.484 seconds
Complete requests:      500
Failed requests:        60
   (Connect: 0, Receive: 0, Length: 60, Exceptions: 0)
Non-2xx responses:      60
Total transferred:      249640 bytes
Total body sent:        288500
HTML transferred:       32680 bytes
Requests per second:    91.18 [#/sec] (mean)
Time per request:       548.371 [ms] (mean)
Time per request:       10.967 [ms] (mean, across all concurrent requests)
Transfer rate:          44.46 [Kbytes/sec] received
                        51.38 kb/s sent
                        95.83 kb/s total

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:      122  302 229.3    224    1652
Processing:    45  112  98.0     80     944
Waiting:       43   79  33.6     71     518
Total:        170  414 283.8    316    1831

Percentage of the requests served within a certain time (ms)
  50%    316
  66%    390
  75%    462
  80%    563
  90%    787
  95%   1022
  98%   1292
  99%   1692
 100%   1831 (longest request)
```

### 错误处理测试结果

#### 缺少必填参数测试
```
{"code":404,"status":false,"message":"商户不存在","data":{}}
HTTP状态码: 200
响应时间: 0.237001s
```


## 测试总结

### 性能指标
- **并发处理能力**: 通过Apache Bench和wrk测试评估
- **响应时间**: 记录各接口的平均响应时间
- **错误率**: 统计请求失败率
- **吞吐量**: 每秒处理请求数 (RPS)

### 功能验证
- ✅ 订单创建接口正常工作
- ✅ 订单查询接口正常工作  
- ✅ 商户余额查询接口正常工作
- ✅ 错误处理机制正常
- ✅ 参数验证机制正常

### 建议
1. 根据测试结果调整服务器配置
2. 监控生产环境的性能指标
3. 定期进行压力测试
4. 优化数据库查询性能
5. 考虑使用缓存机制

## 测试文件
所有测试结果文件保存在: `test_results_20251018_190134/`

