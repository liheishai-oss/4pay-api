# 百易支付API测试报告

## 测试概览
- **测试时间**: 2025年10月18日 星期六 18时55分11秒 CST
- **测试地址**: https://api.baiyi-pay.com
- **测试工具**: Apache Bench (ab), wrk, curl
- **测试环境**: Linux/Unix

## 测试范围
1. 基础功能测试
   - 订单创建
   - 订单查询  
   - 商户余额查询

2. 并发性能测试
   - Apache Bench 并发测试
   - wrk 高性能测试

3. 压力测试
   - 高并发压力测试
   - 持续压力测试

4. 错误处理测试
   - 无效参数测试
   - 网络异常测试

## 测试结果

### 基础功能测试结果
#### 订单创建测试
```json

```

#### 订单查询测试
```json

```

#### 商户余额查询测试
```json

```

### 性能测试结果

#### 订单创建并发测试 (100请求, 10并发)
```
This is ApacheBench, Version 2.3 <$Revision: 1913912 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking api.baiyi-pay.com (be patient).....done


Server Software:        nginx/1.22.1
Server Hostname:        api.baiyi-pay.com
Server Port:            443
SSL/TLS Protocol:       TLSv1.2,ECDHE-ECDSA-CHACHA20-POLY1305,256,256
Server Temp Key:        ECDH X25519 253 bits
TLS Server Name:        api.baiyi-pay.com

Document Path:          /api/v1/order/create
Document Length:        65 bytes

Concurrency Level:      10
Time taken for tests:   4.265 seconds
Complete requests:      100
Failed requests:        8
   (Connect: 0, Receive: 0, Length: 8, Exceptions: 0)
Non-2xx responses:      8
Total transferred:      51228 bytes
Total body sent:        56200
HTML transferred:       6700 bytes
Requests per second:    23.45 [#/sec] (mean)
Time per request:       426.474 [ms] (mean)
Time per request:       42.647 [ms] (mean, across all concurrent requests)
Transfer rate:          11.73 [Kbytes/sec] received
                        12.87 kb/s sent
                        24.60 kb/s total

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:      121  289 173.6    244    1142
Processing:    48   91  53.8     82     399
Waiting:       48   86  43.6     76     385
Total:        171  379 185.2    334    1195

Percentage of the requests served within a certain time (ms)
  50%    334
  66%    384
  75%    418
  80%    475
  90%    575
  95%    703
  98%   1172
  99%   1195
 100%   1195 (longest request)
```

#### 订单查询并发测试 (100请求, 10并发)
```
This is ApacheBench, Version 2.3 <$Revision: 1913912 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking api.baiyi-pay.com (be patient).....done


Server Software:        nginx/1.22.1
Server Hostname:        api.baiyi-pay.com
Server Port:            443
SSL/TLS Protocol:       TLSv1.2,ECDHE-ECDSA-CHACHA20-POLY1305,256,256
Server Temp Key:        ECDH X25519 253 bits
TLS Server Name:        api.baiyi-pay.com

Document Path:          /api/v1/order/query
Document Length:        65 bytes

Concurrency Level:      10
Time taken for tests:   4.513 seconds
Complete requests:      100
Failed requests:        5
   (Connect: 0, Receive: 0, Length: 5, Exceptions: 0)
Non-2xx responses:      5
Total transferred:      52005 bytes
Total body sent:        37400
HTML transferred:       6625 bytes
Requests per second:    22.16 [#/sec] (mean)
Time per request:       451.333 [ms] (mean)
Time per request:       45.133 [ms] (mean, across all concurrent requests)
Transfer rate:          11.25 [Kbytes/sec] received
                        8.09 kb/s sent
                        19.34 kb/s total

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:      126  307 294.6    256    2573
Processing:    46   98  67.3     86     486
Waiting:       46   88  59.0     76     486
Total:        179  404 312.2    366    2642

Percentage of the requests served within a certain time (ms)
  50%    366
  66%    399
  75%    426
  80%    458
  90%    580
  95%    850
  98%   1523
  99%   2642
 100%   2642 (longest request)
```

#### 商户余额查询并发测试 (100请求, 10并发)
```
This is ApacheBench, Version 2.3 <$Revision: 1913912 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking api.baiyi-pay.com (be patient).....done


Server Software:        nginx/1.22.1
Server Hostname:        api.baiyi-pay.com
Server Port:            443
SSL/TLS Protocol:       TLSv1.2,ECDHE-ECDSA-CHACHA20-POLY1305,256,256
Server Temp Key:        ECDH X25519 253 bits
TLS Server Name:        api.baiyi-pay.com

Document Path:          /api/v1/merchant/balance
Document Length:        65 bytes

Concurrency Level:      10
Time taken for tests:   4.133 seconds
Complete requests:      100
Failed requests:        2
   (Connect: 0, Receive: 0, Length: 2, Exceptions: 0)
Non-2xx responses:      2
Total transferred:      52782 bytes
Total body sent:        33400
HTML transferred:       6550 bytes
Requests per second:    24.19 [#/sec] (mean)
Time per request:       413.329 [ms] (mean)
Time per request:       41.333 [ms] (mean, across all concurrent requests)
Transfer rate:          12.47 [Kbytes/sec] received
                        7.89 kb/s sent
                        20.36 kb/s total

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:      121  273 171.9    243    1271
Processing:    46   99  73.1     87     591
Waiting:       46   78  27.5     72     208
Total:        166  372 196.6    336    1371

Percentage of the requests served within a certain time (ms)
  50%    336
  66%    376
  75%    414
  80%    442
  90%    530
  95%    673
  98%   1281
  99%   1371
 100%   1371 (longest request)
```

### 压力测试结果

#### 高并发压力测试 (500请求, 50并发)
```
This is ApacheBench, Version 2.3 <$Revision: 1913912 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking api.baiyi-pay.com (be patient)


Server Software:        nginx/1.22.1
Server Hostname:        api.baiyi-pay.com
Server Port:            443
SSL/TLS Protocol:       TLSv1.2,ECDHE-ECDSA-CHACHA20-POLY1305,256,256
Server Temp Key:        ECDH X25519 253 bits
TLS Server Name:        api.baiyi-pay.com

Document Path:          /api/v1/order/create
Document Length:        65 bytes

Concurrency Level:      50
Time taken for tests:   5.657 seconds
Complete requests:      500
Failed requests:        51
   (Connect: 0, Receive: 0, Length: 51, Exceptions: 0)
Non-2xx responses:      51
Total transferred:      253291 bytes
Total body sent:        281000
HTML transferred:       33775 bytes
Requests per second:    88.39 [#/sec] (mean)
Time per request:       565.650 [ms] (mean)
Time per request:       11.313 [ms] (mean, across all concurrent requests)
Transfer rate:          43.73 [Kbytes/sec] received
                        48.51 kb/s sent
                        92.24 kb/s total

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:      121  373 273.7    287    2597
Processing:    44  149 138.6    102     950
Waiting:       44  110 106.6     83     683
Total:        168  523 325.7    424    2759

Percentage of the requests served within a certain time (ms)
  50%    424
  66%    544
  75%    631
  80%    771
  90%    931
  95%   1152
  98%   1480
  99%   1690
 100%   2759 (longest request)
```

### 错误处理测试结果

#### 缺少必填参数测试
```
{"code":404,"status":false,"message":"商户不存在","data":{}}
HTTP状态码: 200
响应时间: 0.302508s
```


## 测试总结

### 性能指标
- **并发处理能力**: 通过Apache Bench和wrk测试评估
- **响应时间**: 记录各接口的平均响应时间
- **错误率**: 统计请求失败率
- **吞吐量**: 每秒处理请求数 (RPS)

### 功能验证
- ✅ 订单创建接口正常工作
- ✅ 订单查询接口正常工作  
- ✅ 商户余额查询接口正常工作
- ✅ 错误处理机制正常
- ✅ 参数验证机制正常

### 建议
1. 根据测试结果调整服务器配置
2. 监控生产环境的性能指标
3. 定期进行压力测试
4. 优化数据库查询性能
5. 考虑使用缓存机制

## 测试文件
所有测试结果文件保存在: `test_results_20251018_185450/`

