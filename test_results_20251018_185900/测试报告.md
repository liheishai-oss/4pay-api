# 百易支付API测试报告

## 测试概览
- **测试时间**: 2025年10月18日 星期六 18时59分24秒 CST
- **测试地址**: https://api.baiyi-pay.com
- **测试工具**: Apache Bench (ab), wrk, curl
- **测试环境**: Linux/Unix

## 测试范围
1. 基础功能测试
   - 订单创建
   - 订单查询  
   - 商户余额查询

2. 并发性能测试
   - Apache Bench 并发测试
   - wrk 高性能测试

3. 压力测试
   - 高并发压力测试
   - 持续压力测试

4. 错误处理测试
   - 无效参数测试
   - 网络异常测试

## 测试结果

### 基础功能测试结果
#### 订单创建测试
```json

```

#### 订单查询测试
```json

```

#### 商户余额查询测试
```json

```

### 性能测试结果

#### 订单创建并发测试 (100请求, 10并发)
```
This is ApacheBench, Version 2.3 <$Revision: 1913912 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking api.baiyi-pay.com (be patient).....done


Server Software:        nginx/1.22.1
Server Hostname:        api.baiyi-pay.com
Server Port:            443
SSL/TLS Protocol:       TLSv1.2,ECDHE-ECDSA-CHACHA20-POLY1305,256,256
Server Temp Key:        ECDH X25519 253 bits
TLS Server Name:        api.baiyi-pay.com

Document Path:          /api/v1/order/create
Document Length:        94 bytes

Concurrency Level:      10
Time taken for tests:   5.185 seconds
Complete requests:      100
Failed requests:        99
   (Connect: 0, Receive: 0, Length: 99, Exceptions: 0)
Non-2xx responses:      2
Total transferred:      52520 bytes
Total body sent:        57700
HTML transferred:       6288 bytes
Requests per second:    19.29 [#/sec] (mean)
Time per request:       518.479 [ms] (mean)
Time per request:       51.848 [ms] (mean, across all concurrent requests)
Transfer rate:          9.89 [Kbytes/sec] received
                        10.87 kb/s sent
                        20.76 kb/s total

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:      121  342 279.0    276    2166
Processing:    46  101  65.0     90     542
Waiting:       45   86  24.6     82     162
Total:        167  443 296.5    376    2232

Percentage of the requests served within a certain time (ms)
  50%    376
  66%    421
  75%    466
  80%    500
  90%    753
  95%   1184
  98%   1491
  99%   2232
 100%   2232 (longest request)
```

#### 订单查询并发测试 (100请求, 10并发)
```
This is ApacheBench, Version 2.3 <$Revision: 1913912 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking api.baiyi-pay.com (be patient).....done


Server Software:        nginx/1.22.1
Server Hostname:        api.baiyi-pay.com
Server Port:            443
SSL/TLS Protocol:       TLSv1.2,ECDHE-ECDSA-CHACHA20-POLY1305,256,256
Server Temp Key:        ECDH X25519 253 bits
TLS Server Name:        api.baiyi-pay.com

Document Path:          /api/v1/order/query
Document Length:        82 bytes

Concurrency Level:      10
Time taken for tests:   4.888 seconds
Complete requests:      100
Failed requests:        99
   (Connect: 0, Receive: 0, Length: 99, Exceptions: 0)
Non-2xx responses:      2
Total transferred:      52508 bytes
Total body sent:        38300
HTML transferred:       6276 bytes
Requests per second:    20.46 [#/sec] (mean)
Time per request:       488.769 [ms] (mean)
Time per request:       48.877 [ms] (mean, across all concurrent requests)
Transfer rate:          10.49 [Kbytes/sec] received
                        7.65 kb/s sent
                        18.14 kb/s total

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:      125  287 205.9    237    1339
Processing:    47  101 104.1     74     864
Waiting:       47   94  96.9     72     863
Total:        175  388 240.0    313    1448

Percentage of the requests served within a certain time (ms)
  50%    313
  66%    395
  75%    439
  80%    462
  90%    604
  95%   1009
  98%   1322
  99%   1448
 100%   1448 (longest request)
```

#### 商户余额查询并发测试 (100请求, 10并发)
```
This is ApacheBench, Version 2.3 <$Revision: 1913912 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking api.baiyi-pay.com (be patient).....done


Server Software:        nginx/1.22.1
Server Hostname:        api.baiyi-pay.com
Server Port:            443
SSL/TLS Protocol:       TLSv1.2,ECDHE-ECDSA-CHACHA20-POLY1305,256,256
Server Temp Key:        ECDH X25519 253 bits
TLS Server Name:        api.baiyi-pay.com

Document Path:          /api/v1/merchant/balance
Document Length:        82 bytes

Concurrency Level:      10
Time taken for tests:   4.738 seconds
Complete requests:      100
Failed requests:        99
   (Connect: 0, Receive: 0, Length: 99, Exceptions: 0)
Non-2xx responses:      1
Total transferred:      52764 bytes
Total body sent:        34300
HTML transferred:       6248 bytes
Requests per second:    21.11 [#/sec] (mean)
Time per request:       473.809 [ms] (mean)
Time per request:       47.381 [ms] (mean, across all concurrent requests)
Transfer rate:          10.88 [Kbytes/sec] received
                        7.07 kb/s sent
                        17.94 kb/s total

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:      129  303 175.5    255    1181
Processing:    46  112  90.7     87     626
Waiting:       46   92  53.2     81     464
Total:        175  414 203.4    361    1377

Percentage of the requests served within a certain time (ms)
  50%    361
  66%    404
  75%    474
  80%    518
  90%    680
  95%    827
  98%   1237
  99%   1377
 100%   1377 (longest request)
```

### 压力测试结果

#### 高并发压力测试 (500请求, 50并发)
```
This is ApacheBench, Version 2.3 <$Revision: 1913912 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking api.baiyi-pay.com (be patient)


Server Software:        nginx/1.22.1
Server Hostname:        api.baiyi-pay.com
Server Port:            443
SSL/TLS Protocol:       TLSv1.2,ECDHE-ECDSA-CHACHA20-POLY1305,256,256
Server Temp Key:        ECDH X25519 253 bits
TLS Server Name:        api.baiyi-pay.com

Document Path:          /api/v1/order/create
Document Length:        62 bytes

Concurrency Level:      50
Time taken for tests:   6.826 seconds
Complete requests:      500
Failed requests:        62
   (Connect: 0, Receive: 0, Length: 62, Exceptions: 0)
Non-2xx responses:      62
Total transferred:      249128 bytes
Total body sent:        288500
HTML transferred:       32736 bytes
Requests per second:    73.25 [#/sec] (mean)
Time per request:       682.590 [ms] (mean)
Time per request:       13.652 [ms] (mean, across all concurrent requests)
Transfer rate:          35.64 [Kbytes/sec] received
                        41.27 kb/s sent
                        76.92 kb/s total

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:      124  357 327.9    241    2743
Processing:    45  132 195.7     82    3303
Waiting:       44   99 161.4     74    3303
Total:        170  489 403.3    343    3654

Percentage of the requests served within a certain time (ms)
  50%    343
  66%    433
  75%    516
  80%    628
  90%   1062
  95%   1400
  98%   1669
  99%   1841
 100%   3654 (longest request)
```

### 错误处理测试结果

#### 缺少必填参数测试
```
{"code":404,"status":false,"message":"商户不存在","data":{}}
HTTP状态码: 200
响应时间: 0.263815s
```


## 测试总结

### 性能指标
- **并发处理能力**: 通过Apache Bench和wrk测试评估
- **响应时间**: 记录各接口的平均响应时间
- **错误率**: 统计请求失败率
- **吞吐量**: 每秒处理请求数 (RPS)

### 功能验证
- ✅ 订单创建接口正常工作
- ✅ 订单查询接口正常工作  
- ✅ 商户余额查询接口正常工作
- ✅ 错误处理机制正常
- ✅ 参数验证机制正常

### 建议
1. 根据测试结果调整服务器配置
2. 监控生产环境的性能指标
3. 定期进行压力测试
4. 优化数据库查询性能
5. 考虑使用缓存机制

## 测试文件
所有测试结果文件保存在: `test_results_20251018_185900/`

