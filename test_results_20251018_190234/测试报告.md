# 百易支付API测试报告

## 测试概览
- **测试时间**: 2025年10月18日 星期六 19时03分07秒 CST
- **测试地址**: https://api.baiyi-pay.com
- **测试工具**: Apache Bench (ab), wrk, curl
- **测试环境**: Linux/Unix

## 测试范围
1. 基础功能测试
   - 订单创建
   - 订单查询  
   - 商户余额查询

2. 并发性能测试
   - Apache Bench 并发测试
   - wrk 高性能测试

3. 压力测试
   - 高并发压力测试
   - 持续压力测试

4. 错误处理测试
   - 无效参数测试
   - 网络异常测试

## 测试结果

### 基础功能测试结果
#### 订单创建测试
```json

```

#### 订单查询测试
```json

```

#### 商户余额查询测试
```json

```

### 性能测试结果

#### 订单创建并发测试 (100请求, 10并发)
```
This is ApacheBench, Version 2.3 <$Revision: 1913912 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking api.baiyi-pay.com (be patient).....done


Server Software:        nginx/1.22.1
Server Hostname:        api.baiyi-pay.com
Server Port:            443
SSL/TLS Protocol:       TLSv1.2,ECDHE-ECDSA-CHACHA20-POLY1305,256,256
Server Temp Key:        ECDH X25519 253 bits
TLS Server Name:        api.baiyi-pay.com

Document Path:          /api/v1/order/create
Document Length:        94 bytes

Concurrency Level:      10
Time taken for tests:   7.789 seconds
Complete requests:      100
Failed requests:        99
   (Connect: 0, Receive: 0, Length: 99, Exceptions: 0)
Non-2xx responses:      4
Total transferred:      52008 bytes
Total body sent:        57700
HTML transferred:       6344 bytes
Requests per second:    12.84 [#/sec] (mean)
Time per request:       778.943 [ms] (mean)
Time per request:       77.894 [ms] (mean, across all concurrent requests)
Transfer rate:          6.52 [Kbytes/sec] received
                        7.23 kb/s sent
                        13.75 kb/s total

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:      125  622 564.5    317    2295
Processing:    47   99  44.8     91     371
Waiting:       46   87  42.5     80     371
Total:        175  721 569.9    433    2395

Percentage of the requests served within a certain time (ms)
  50%    433
  66%    577
  75%   1303
  80%   1351
  90%   1513
  95%   1719
  98%   2356
  99%   2395
 100%   2395 (longest request)
```

#### 订单查询并发测试 (100请求, 10并发)
```
This is ApacheBench, Version 2.3 <$Revision: 1913912 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking api.baiyi-pay.com (be patient).....done


Server Software:        nginx/1.22.1
Server Hostname:        api.baiyi-pay.com
Server Port:            443
SSL/TLS Protocol:       TLSv1.2,ECDHE-ECDSA-CHACHA20-POLY1305,256,256
Server Temp Key:        ECDH X25519 253 bits
TLS Server Name:        api.baiyi-pay.com

Document Path:          /api/v1/order/query
Document Length:        82 bytes

Concurrency Level:      10
Time taken for tests:   4.405 seconds
Complete requests:      100
Failed requests:        99
   (Connect: 0, Receive: 0, Length: 99, Exceptions: 0)
Non-2xx responses:      3
Total transferred:      52252 bytes
Total body sent:        38300
HTML transferred:       6304 bytes
Requests per second:    22.70 [#/sec] (mean)
Time per request:       440.534 [ms] (mean)
Time per request:       44.053 [ms] (mean, across all concurrent requests)
Transfer rate:          11.58 [Kbytes/sec] received
                        8.49 kb/s sent
                        20.07 kb/s total

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:      125  306 222.3    246    1588
Processing:    48   98  59.8     84     505
Waiting:       46   79  33.5     73     279
Total:        181  404 237.6    335    1683

Percentage of the requests served within a certain time (ms)
  50%    335
  66%    418
  75%    463
  80%    548
  90%    615
  95%    799
  98%   1345
  99%   1683
 100%   1683 (longest request)
```

#### 商户余额查询并发测试 (100请求, 10并发)
```
This is ApacheBench, Version 2.3 <$Revision: 1913912 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking api.baiyi-pay.com (be patient).....done


Server Software:        nginx/1.22.1
Server Hostname:        api.baiyi-pay.com
Server Port:            443
SSL/TLS Protocol:       TLSv1.2,ECDHE-ECDSA-CHACHA20-POLY1305,256,256
Server Temp Key:        ECDH X25519 253 bits
TLS Server Name:        api.baiyi-pay.com

Document Path:          /api/v1/merchant/balance
Document Length:        82 bytes

Concurrency Level:      10
Time taken for tests:   5.342 seconds
Complete requests:      100
Failed requests:        99
   (Connect: 0, Receive: 0, Length: 99, Exceptions: 0)
Non-2xx responses:      3
Total transferred:      52252 bytes
Total body sent:        34300
HTML transferred:       6304 bytes
Requests per second:    18.72 [#/sec] (mean)
Time per request:       534.233 [ms] (mean)
Time per request:       53.423 [ms] (mean, across all concurrent requests)
Transfer rate:          9.55 [Kbytes/sec] received
                        6.27 kb/s sent
                        15.82 kb/s total

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:      121  324 368.4    244    3447
Processing:    46  100  76.5     86     535
Waiting:       45   79  35.3     72     368
Total:        167  424 393.8    335    3558

Percentage of the requests served within a certain time (ms)
  50%    335
  66%    415
  75%    453
  80%    481
  90%    568
  95%    980
  98%   1794
  99%   3558
 100%   3558 (longest request)
```

### 压力测试结果

#### 高并发压力测试 (500请求, 50并发)
```
This is ApacheBench, Version 2.3 <$Revision: 1913912 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking api.baiyi-pay.com (be patient)


Server Software:        nginx/1.22.1
Server Hostname:        api.baiyi-pay.com
Server Port:            443
SSL/TLS Protocol:       TLSv1.2,ECDHE-ECDSA-CHACHA20-POLY1305,256,256
Server Temp Key:        ECDH X25519 253 bits
TLS Server Name:        api.baiyi-pay.com

Document Path:          /api/v1/order/create
Document Length:        62 bytes

Concurrency Level:      50
Time taken for tests:   7.032 seconds
Complete requests:      500
Failed requests:        51
   (Connect: 0, Receive: 0, Length: 51, Exceptions: 0)
Non-2xx responses:      51
Total transferred:      251944 bytes
Total body sent:        288500
HTML transferred:       32428 bytes
Requests per second:    71.10 [#/sec] (mean)
Time per request:       703.233 [ms] (mean)
Time per request:       14.065 [ms] (mean, across all concurrent requests)
Transfer rate:          34.99 [Kbytes/sec] received
                        40.06 kb/s sent
                        75.05 kb/s total

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:      122  383 336.6    256    2137
Processing:    44  142 138.3     88     846
Waiting:       44   91  85.1     72     830
Total:        167  525 395.2    367    2402

Percentage of the requests served within a certain time (ms)
  50%    367
  66%    498
  75%    661
  80%    810
  90%   1119
  95%   1356
  98%   1711
  99%   2123
 100%   2402 (longest request)
```

### 错误处理测试结果

#### 缺少必填参数测试
```
{"code":404,"status":false,"message":"商户不存在","data":{}}
HTTP状态码: 200
响应时间: 1.439653s
```


## 测试总结

### 性能指标
- **并发处理能力**: 通过Apache Bench和wrk测试评估
- **响应时间**: 记录各接口的平均响应时间
- **错误率**: 统计请求失败率
- **吞吐量**: 每秒处理请求数 (RPS)

### 功能验证
- ✅ 订单创建接口正常工作
- ✅ 订单查询接口正常工作  
- ✅ 商户余额查询接口正常工作
- ✅ 错误处理机制正常
- ✅ 参数验证机制正常

### 建议
1. 根据测试结果调整服务器配置
2. 监控生产环境的性能指标
3. 定期进行压力测试
4. 优化数据库查询性能
5. 考虑使用缓存机制

## 测试文件
所有测试结果文件保存在: `test_results_20251018_190234/`

